---
title: 実稼動パイプラインの追加
description: Cloud Manager を使用して、コードをデプロイする実稼動パイプラインを作成および設定する方法について説明します。
exl-id: d489fa3c-df1e-480b-82d0-ac8cce78a710
source-git-commit: 1209faf71edbd74cd87acfe24ec438b98ddd4a3a
workflow-type: ht
source-wordcount: '1249'
ht-degree: 100%

---


# 実稼動パイプラインの追加 {#configuring-production-pipelines}

Cloud Manager を使用して、コードをデプロイする実稼動パイプラインを作成および設定する方法について説明します。Cloud Manager でのパイプラインの動作に関する概念的な概要を最初に把握したい場合は、[CI／CD パイプライン](/help/overview/ci-cd-pipelines.md)を参照してください。

## 概要 {#overview}

**パイプライン設定**&#x200B;タイルを [!UICONTROL Cloud Manager] で使用すると、2 つの異なるタイプのパイプラインを作成できます。

* **実稼動パイプライン** - 実稼動パイプラインは、ソースコードを Git リポジトリから実稼動環境に取り込む目的で調整された一連のステップで構成される専用のパイプラインです。
* **実稼動以外のパイプライン** - 実稼動以外のパイプラインは、コード品質スキャンの実行または開発環境へのソースコードのデプロイを目的としています。

このドキュメントでは、実稼動パイプラインに焦点を当てます。実稼動以外のパイプラインの設定方法について詳しくは、[実稼動以外のパイプラインの設定](/help/using/non-production-pipelines.md)のドキュメントを参照してください。

**デプロイメントマネージャー**&#x200B;の役割は、パイプラインを設定することです。パイプライン設定は以下で構成されます。

1. パイプラインを開始するトリガーの定義。
1. 実稼動デプロイメントを制御するパラメーターの定義。
1. パフォーマンステストパラメーターの設定。

>[!NOTE]
>
>パイプラインは、関連する Git リポジトリが少なくとも 1 つの分岐を持ち、[プログラム設定](/help/getting-started/program-setup.md)が完了するまで、設定できません。

## 新しい実稼動パイプラインの追加 {#adding-production-pipeline}

[!UICONTROL Cloud Manager] UI を使用してプログラムを設定し、少なくとも 1 つの環境を用意したら、実稼動パイプラインを追加する準備が整います。

1. [my.cloudmanager.adobe.com](https://my.cloudmanager.adobe.com/) で Cloud Manager にログインし、適切な組織とプログラムを選択します。

1. **プログラムの概要**&#x200B;ページから&#x200B;**パイプライン**&#x200B;カードに移動します。

1. 「**+ 追加**」をクリックして、「**実稼動パイプラインを追加**」を選択します。

   ![実稼動パイプラインを追加](/help/assets/configure-pipelines/add-prod1.png)

1. **実稼動パイプラインを追加**&#x200B;ダイアログボックスが開き、「**設定**」タブが開きます。このタブでは、パイプラインに対する複数のオプションを定義する必要があります。これらのオプションは折りたたみ可能なセクションにグループ化されています。次の手順で説明します。

   1. 「**パイプライン名**」フィールドに、パイプラインのわかりやすい名前を指定します。

   1. 「**ソースコード**」セクションで、パイプラインが処理するコードを取得する場所を定義します。

      * **リポジトリ** - パイプラインがコードを取得する Git リポジトリを定義します。

      >[!TIP]
      >
      >Cloud Manager でリポジトリを追加および管理する方法について詳しくは、[プログラムの設定](/help/getting-started/program-setup.md)のドキュメントを参照してください。

      * **Git 分岐** - 選択したパイプラインがどの分岐からコードを取得するかを定義します。
      * **コードの場所** - パイプラインがコードを取得する必要がある、選択したリポジトリの分岐内のパスを定義します。

      ![パイプラインのリポジトリを定義](/help/assets/configure-pipelines/add-prod2.png)

   1. 「**環境**」セクションでは、デプロイメントをトリガーするものと、環境ごとのロールアウト方法を定義します。

      1. 「**ステージ**」セクションでは、パイプラインをステージング環境にロールアウトする方法を定義できます。

         * **デプロイメントトリガー** - 次のオプションで、パイプラインを開始するデプロイメントトリガーを定義できます。

            * **手動** - Cloud Manager UI を使用して、パイプラインを手動で開始します。
            * **Git の変更時** - 設定された Git 分岐にコミットが追加されるたびに CI/CD パイプラインを開始します。このオプションを使用すると、必要に応じてパイプラインを手動で開始できます。

         * **重要な指標のエラー動作** - パイプラインの設定または編集中に、デプロイメントマネージャーには、品質ゲートのいずれかで重要なエラーが発生した場合のパイプラインの動作を定義するオプションがあります。使用できるオプションは以下のとおりです。

            * **毎回確認する** - デフォルトの設定。重要なエラーが検出されたときに手動で介入する必要があります。
            * **直ちに失敗** - 重要なエラーが発生すると、パイプラインはキャンセルされます。各エラーをユーザーが手動で拒否する状況をエミュレートします。
            * **直ちに続行** - 重要なエラーが発生しても、パイプラインは自動的に続行されます。各エラーをユーザーが手動で承認する状況をエミュレートします。

         ![デプロイメントトリガー](/help/assets/configure-pipelines/add-prod3.png)

         * **デプロイメントオプション** - 特定のデプロイメントタスクを高速化できます。

            * **ステージデプロイメント後に承認** - この承認は、テストが行われる前にステージング環境へのデプロイメント後に発生します。それ以外の場合は、すべてのテストが完了した後、実稼動のデプロイメントの前に承認が行われます。

            * **ロードバランサーの変更をスキップ** - ロードバランサーの変更は行われません。

         ![ステージングデプロイメントオプション](/help/assets/configure-pipelines/add-prod4.png)

         * **Dispatcher 設定** - **デプロイメントマネージャー**&#x200B;の役割は、パイプラインの実行時に AEM Dispatcher キャッシュから無効化またはフラッシュされる一連のコンテンツパスを設定できます。これらのキャッシュアクションは、コンテンツパッケージがデプロイされた直後に、デプロイメントパイプラインステップの一部として実行されます。これらの設定では、AEM Dispatcher の標準的な動作を使用します。設定するには、次の手順を実行します。

            1. 「**パス**」で、コンテンツパスを指定します。
            1. 「**種類**」で、そのパスに対して実行するアクションを選択します。

               * **フラッシュ** - キャッシュの削除を実行します。
               * **無効化** - コンテンツがオーサーインスタンスからパブリッシュインスタンスに対してアクティベートされる場合と同様に、キャッシュの無効化を実行します。

            1. 「**パスを追加**」をクリックして、指定したパスを追加します。環境につき最大 100 個のパスを追加できます。

         ![Dispatcher 設定](/help/assets/configure-pipelines/dispatcher-stage.png)

         >[!TIP]
         >
         >一般に、無効化アクションを使用する方が望ましいですが、フラッシュが必要な場合もあります（特に、AEM HTML クライアントライブラリを使用する場合など）。

      1. 「**実稼動**」セクションでは、パイプラインが実稼動環境にどのようにロールアウトされるかを定義できます。

         * **デプロイメントオプション** - 実稼動デプロイメントを制御するパラメーターを定義できます。

            * **GoLive の承認を使用** - [!UICONTROL Cloud Manager UI] を使用して、**ビジネスオーナー**、**プロジェクトマネージャー**、**デプロイメントマネージャー**&#x200B;のいずれかの役割を持つユーザーがデプロイメントを手動で承認する必要があります。
            * **スケジュール設定** - 実稼動デプロイメントの前にパイプラインを停止し、スケジュールできるようにします。このオプションを選択した場合、パイプラインはステージング環境へのデプロイメント後に停止し、実行するアクションをユーザーに促します。
               * **`Now`** - 実稼動環境に即座にデプロイされ、パイプラインを効果的に完了します。
               * **日付** - ユーザーはデプロイメントを完了する時刻をスケジュールできます。
               * **実行を停止** - 実稼動環境へのデプロイメントを中止します。

           >[!TIP]
           >
           >デプロイメントスケジュールを設定する方法やパイプラインをすぐに実行する方法について詳しくは、[コードのデプロイメント](/help/using/code-deployment.md)を参照してください。

            * **CSE Oversight を使用** - このオプションを選択すると、CSE（カスタマーサクセスエンジニア）が実際にデプロイメントを開始します。このオプションが有効な場合、パイプラインの作成または編集時に、**デプロイメントマネージャー**&#x200B;の役割には次のオプションがあります。

               * **任意の CSE** - 対応可能な任意の CSE がデプロイメントを開始できます。
               * **担当の CSE** - 顧客に割り当てられた特定の CSE のみがデプロイメントを開始できます。このオプションは、割り当てられた CSE が対応できない場合に、CSE の指定されたバックアップにも当てはまります。

           ![実稼動デプロイメントオプション](/help/assets/configure-pipelines/prod-deploymentoptions.png)

         * **Dispatcher 設定** - 実稼動環境の Dispatcher 設定を定義します。オプションは、ステージング環境のオプションと同じです。

1. 「**続行**」をクリックして「**ステージテスト**」タブに進み、ライセンスを取得した製品に応じて、AEM Sites と AEM Assets のパフォーマンステストを設定できます。

   >[!TIP]
   >
   >「**ステージテスト**」タブで使用できるオプションについて詳しくは、[コード品質テスト](/help/using/code-quality-testing.md#performance-testing)を参照してください。

   1. 「**サイトコンテンツ配信 / 負荷分散**」セクションでは、3 つのページセット間でのページリクエストの重み付けに基づいて、サイトのパフォーマンステストを設定します。必要に応じて、ページセットを有効または無効にできます。

      * **頻度の高いライブページ**
      * **その他のライブページ**
      * **新規ページ**

      ![サイトの読み込みの重み付け](/help/assets/configure-pipelines/add-prod5.png)

   1. 「**アセットパフォーマンステスト配布**」セクションでは、画像と PDF のテスト配布を定義し、独自のテストアセットを定義します。

      * **画像** - スライダーを調整して、画像と PDF 間のテスト分割を調整します。
      * **PDF** - スライダーを調整して、画像と PDF の間でテストの分割を調整します。

      * 独自のカスタムアセットをアップロードして定義します。

         1. **フォーマット** - カスタムアセットが画像の PDF かどうかを選択します。
         1. **ファイル名** - ファイルブラウザーボタンを使用して、ローカルマシンから画像を選択します。
         1. **テストファイルを追加** - クリックして、選択したアセットをアップロードします。

      ![アセットテスト配布](/help/assets/configure-pipelines/add-prod6.png)

1. 「**保存**」をクリックして、実稼動パイプラインの追加を完了します。

## 次の手順 {#the-next-steps}

パイプラインを設定したら、コードをデプロイします。詳しくは、[コードのデプロイメント](/help/using/code-deployment.md)を参照してください。

## ビデオチュートリアル {#video-tutorial-one}

このビデオでは、パイプライン作成プロセスの概要を説明します。詳しくは、このドキュメントで説明します。

>[!VIDEO](https://video.tv.adobe.com/v/327602?captions=jpn)
