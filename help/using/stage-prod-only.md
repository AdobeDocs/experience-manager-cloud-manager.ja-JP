---
title: ステージング専用パイプラインと実稼動専用パイプライン
description: 専用パイプラインを使用してステージングデプロイメントと実稼動デプロイメントを分割する方法について説明します。
source-git-commit: c09fbf30270523018a36b128d43cbf10e65daf54
workflow-type: tm+mt
source-wordcount: '842'
ht-degree: 2%

---


# ステージング専用パイプラインと実稼動用パイプライン {#stage-prod-only}

専用パイプラインを使用してステージングデプロイメントと実稼動デプロイメントを分割する方法について説明します。

>[!NOTE]
>
>この機能は、[早期導入プログラム](/help/release-notes/current.md#early-adoption)でのみ利用できます。

## 概要 {#overview}

ステージング環境と実稼動環境は緊密に結び付いています。 デフォルトでは、それらに対するデプロイメントは単一のパイプラインにリンクされます。 これは、そのプログラムのステージング環境と実稼動環境の両方にデプロイメントパイプラインがデプロイされるものです。 このカップリングは通常は適していますが、欠点があるユースケースもあります。

* ステージのみへデプロイする場合は、を拒否することによってのみ可能です **実稼動環境に昇格** パイプラインを開きます。 ただし、実行はキャンセルとマークされます。
* ステージング環境で最新のコードを実稼動環境にデプロイする場合は、コードが変更されていなくても、ステージングデプロイメントを含むパイプライン全体を再デプロイする必要があります。
* デプロイメント中に環境を更新できないので、実稼動環境に昇格する前に、ステージング環境で数日間一時停止およびテストを行う場合、実稼動環境を更新できません。 これにより、更新などの非依存タスクが作成されます [環境変数](/help/getting-started/build-environment.md#environment-variables) 不可能。

ステージング専用パイプラインと実稼動専用パイプラインは、専用のデプロイメントオプションを提供することで、これらのユースケースに対するソリューションを提供します。

* **ステージング専用デプロイメントパイプライン** デプロイメントとテストが完了したら、実行が完了したステージング環境にのみデプロイします。
   * ステージング専用パイプラインは、標準の結合フルスタック実稼動パイプラインと同じように動作しますが、実稼動デプロイメントステップ（承認、スケジュール、デプロイ）は除きます。
* **実稼動専用デプロイメントパイプライン** 実稼動環境にのみデプロイします。その際、実行がステージング環境で正常に完了および検証されたのを選択し、そのアーティファクトを実稼動環境にデプロイするオプションも指定します。
   * 実稼動専用パイプラインは、構築フェーズをスキップして、ステージデプロイメントからアーティファクトを再利用します。

フルスタック実稼動パイプラインの実行中は、ステージング専用パイプラインも実稼動専用パイプラインも実行されません（その逆も同様です）。

これらの専用パイプラインはより柔軟性がありますが、次の操作の詳細と推奨事項に注意してください。

>[!NOTE]
>
>実稼動専用パイプラインは、その間に標準の結合実稼動パイプラインを介してステージにデプロイされたかに関係なく、常にステージ専用パイプラインのアーティファクトを使用します。
>
>* これにより、不要なコードロールバックが発生する可能性があります。
>* Adobeでは、実稼動専用パイプラインとステージング専用パイプラインの使用を開始したら、標準の結合実稼動パイプラインの使用を停止することをお勧めします。
>* 標準の結合パイプラインとステージングまたは実稼動専用パイプラインの両方を引き続き実行する場合は、コードのロールバックを避けるために、アーティファクトが再利用されることに注意してください。

## パイプラインの作成 {#pipeline-creation}

実稼動専用パイプラインとステージ専用パイプラインは、標準の結合方法と同様に作成されます [実稼動パイプライン](/help/using/production-pipelines.md) および [実稼動以外のパイプライン。](/help/using/non-production-pipelines.md) 詳しくは、その資料を参照してください。

1. が含まれる **パイプライン** ウィンドウ、タップまたはクリック **パイプラインを追加**.

   * を選択 **実稼動以外のパイプラインを追加** ステージのみのパイプラインを作成する場合
   * を選択 **実稼動専用パイプラインを追加** 実稼動専用パイプラインを作成します。

   ![実稼動/ステージ専用パイプラインの作成](/help/assets/configure-pipelines/prod-stage-pipelines.png)

>[!NOTE]
>
>対応するパイプラインが既に存在する場合、特定のオプションがグレー表示される場合があります。
>
>* **実稼動専用パイプラインを追加** は、ステージのみのパイプラインがまだ存在しない場合は使用できません。
>* **実稼動パイプラインを追加** 標準の結合パイプラインが既に存在する場合、は使用できません。
>* プログラムごとに使用できる実稼動専用パイプラインとステージ専用パイプラインは 1 つだけです。

### ステージ専用パイプライン {#stage-only}

1. を選択したら、 **実稼動以外のパイプラインを追加** オプション、 **実稼動以外のパイプラインを追加** ダイアログが開きます。
1. ステージのみのパイプラインを作成するには、 **適格なデプロイメント環境** パイプラインの「」フィールド 残りのフィールドに入力し、をタップまたはクリックします **続行**.

   ![ステージのみのパイプラインの作成](/help/assets/configure-pipelines/stage-only.png)

1. 日 **ステージテスト** タブをクリックすると、ステージング環境で実行するテストを定義できます。 タップまたはクリック **保存** 新規パイプラインを保存します。

   ![ステージ専用パイプラインのテストパラメーター](/help/assets/configure-pipelines/stage-only-test.png)

### 実稼動専用パイプライン {#prod-only}

1. を選択したら、 **実稼動専用パイプラインを追加** オプション、 **実稼動専用パイプラインを追加** ダイアログが開きます。
1. を指定 **パイプライン名**. ダイアログの残りのオプションと機能は、標準の結合パイプライン作成ダイアログのオプションと同じように機能します。 「**保存**」をタップまたはクリックして、パイプラインを保存します。

   ![実稼動専用パイプラインの作成](/help/assets/configure-pipelines/prod-only-pipeline.png)

## 実稼動専用パイプラインとステージング専用パイプラインの実行 {#running}

実稼動専用パイプラインとステージ専用パイプラインは、と同じ方法で実行されます [他のすべてのパイプラインが実行されます。](/help/using/managing-pipelines.md#running-pipelines) 詳しくは、そのドキュメントを参照してください。

また、実稼動専用パイプラインの実行は、ステージ専用パイプラインの実行の詳細から直接トリガーできます。

### ステージ専用パイプライン {#stage-only-run}

ステージのみのパイプラインは、標準の結合パイプラインとほとんど同じ方法で実行されます。 ただし、テスト手順を実行した後の実行の終了時には、 **ビルドの昇格** ボタンを使用すると、実稼動専用のパイプライン実行を開始できます。この実行によりステージにデプロイされたアーティファクトを使用し、実稼動環境にデプロイします。

![ステージのみのパイプライン実行](/help/assets/configure-pipelines/stage-only-pipeline-run.png)

この **ビルドの昇格** ボタンは、最新の成功したステージのみのパイプライン実行の場合にのみ表示されます。 タップまたはクリックすると、実稼動専用パイプラインの実行を確認するか、実稼動専用パイプラインがまだ存在しない場合は実稼動専用パイプラインを作成するかを尋ねるメッセージが表示されます。

### 実稼動専用パイプライン {#prod-only-run}

実稼動専用パイプラインの場合は、実稼動環境にデプロイするソースアーティファクトを特定することが重要です。 これらの詳細は、 **アーティファクトの準備** ステップ。 これらの実行に移動すると、詳細やログを確認できます。

![アーティファクトの詳細](/help/assets/configure-pipelines/prod-only-pipeline-run.png)
